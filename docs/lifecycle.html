<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>The lifecycle of the game · Dungeon Hopper</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="The game goes through these 3 phases in its lifecycle:"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="The lifecycle of the game · Dungeon Hopper"/><meta property="og:type" content="website"/><meta property="og:url" content="https://AntonC9018.github.io/Dungeon-Hopper-Docs/"/><meta property="og:description" content="The game goes through these 3 phases in its lifecycle:"/><meta property="og:image" content="https://AntonC9018.github.io/Dungeon-Hopper-Docs/img/undraw_online.svg"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://AntonC9018.github.io/Dungeon-Hopper-Docs/img/undraw_tweetstorm.svg"/><link rel="shortcut icon" href="/Dungeon-Hopper-Docs/img/favicon.ico"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script src="/Dungeon-Hopper-Docs/js/scrollSpy.js"></script><link rel="stylesheet" href="/Dungeon-Hopper-Docs/css/main.css"/><script src="/Dungeon-Hopper-Docs/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/Dungeon-Hopper-Docs/"><img class="logo" src="/Dungeon-Hopper-Docs/img/favicon.ico" alt="Dungeon Hopper"/><h2 class="headerTitleWithLogo">Dungeon Hopper</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/Dungeon-Hopper-Docs/docs/start" target="_self">Docs</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Terminology And Basics</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Getting Started</h3><ul class=""><li class="navListItem"><a class="navItem" href="/Dungeon-Hopper-Docs/docs/start">What is this?</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Terminology And Basics</h3><ul class=""><li class="navListItem navListItemActive"><a class="navItem" href="/Dungeon-Hopper-Docs/docs/lifecycle">The lifecycle of the game</a></li><li class="navListItem"><a class="navItem" href="/Dungeon-Hopper-Docs/docs/chains">Chains and Chain Templates</a></li><li class="navListItem"><a class="navItem" href="/Dungeon-Hopper-Docs/docs/vocab">Calling Conventions</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Topics</h3><ul class=""><li class="navListItem"><a class="navItem" href="/Dungeon-Hopper-Docs/docs/gameloop">Game Loop</a></li><li class="navListItem"><a class="navItem" href="/Dungeon-Hopper-Docs/docs/decorators">Decorators</a></li><li class="navListItem"><a class="navItem" href="/Dungeon-Hopper-Docs/docs/action">Action</a></li><li class="navListItem"><a class="navItem" href="/Dungeon-Hopper-Docs/docs/algos">Algorithms</a></li><li class="navListItem"><a class="navItem" href="/Dungeon-Hopper-Docs/docs/movs">Movs Algorithms</a></li><li class="navListItem"><a class="navItem" href="/Dungeon-Hopper-Docs/docs/sequence">Sequence</a></li><li class="navListItem"><a class="navItem" href="/Dungeon-Hopper-Docs/docs/modifiers">Modifiers</a></li><li class="navListItem"><a class="navItem" href="/Dungeon-Hopper-Docs/docs/dynamicstats">Dynamic Stats</a></li><li class="navListItem"><a class="navItem" href="/Dungeon-Hopper-Docs/docs/retouchers">Retouchers</a></li><li class="navListItem"><a class="navItem" href="/Dungeon-Hopper-Docs/docs/tinkers">Tinkers</a></li><li class="navListItem"><a class="navItem" href="/Dungeon-Hopper-Docs/docs/status">Status effects</a></li><li class="navListItem"><a class="navItem" href="/Dungeon-Hopper-Docs/docs/items">Items</a></li><li class="navListItem"><a class="navItem" href="/Dungeon-Hopper-Docs/docs/weapon">Weapons</a></li><li class="navListItem"><a class="navItem" href="/Dungeon-Hopper-Docs/docs/pools">Pools</a></li><li class="navListItem"><a class="navItem" href="/Dungeon-Hopper-Docs/docs/generation">World Generation</a></li><li class="navListItem"><a class="navItem" href="/Dungeon-Hopper-Docs/docs/mods">Mods</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 id="__docusaurus" class="postHeaderTitle">The lifecycle of the game</h1></header><article><div><span><p>The game goes through these 3 phases in its lifecycle:</p>
<ol>
<li>Setup. Here all the classes and the global objects and functions are defined, mod content is added, item pools and stats are set up etc.</li>
<li>Initialization. Here, the world is generated, entities are instantiated, items are drawn from item pools and dropped in the world or placed in chests etc.</li>
<li>The game itself. This is where the gameplay happens. Eventually, when a level is conquered, some parts of the world may be reinitialized, like the map, the entities, the tiles etc.</li>
</ol>
<p>The key thing to note is that the classes themself never change during the latter 2 phases. However, they are allowed to be morphed during the setup phase. This is mainly done by use of <a href="/Dungeon-Hopper-Docs/docs/decorators">decorators</a> and <a href="/Dungeon-Hopper-Docs/docs/retouchers">retouchers</a> and concerns the entity classes in particular.</p>
<h2><a class="anchor" aria-hidden="true" id="globals"></a><a href="#globals" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Globals</h2>
<p>Some core functions, variables and classes were made available globally throughout the project so as to make the imports slimmer. To see all of them, scroll through <a href="https://github.com/AntonC9018/Dungeon-Hopper/blob/master/game/setup.lua">this file</a>. Most notable ones among them:</p>
<table>
<thead>
<tr><th>Variable name</th><th>Imported from</th><th>Decription</th></tr>
</thead>
<tbody>
<tr><td><code>ins</code></td><td><code>lib.inspect</code></td><td>see <a href="https://github.com/kikito/inspect.lua">inspect</a></td></tr>
<tr><td><code>class</code></td><td><code>lib.Luaoop</code></td><td>see <a href="https://github.com/ImagicTheCat/Luaoop">Luaoop</a></td></tr>
<tr><td><code>Vec</code></td><td><code>lib.vec</code></td><td>2d vector. see <a href="https://github.com/AntonC9018/Dungeon-Hopper/blob/master/lib/vec.lua">vec</a></td></tr>
<tr><td><code>Chain</code> + <code>Event</code>, <code>Ranks</code>, <code>Numbers</code></td><td><code>lib.chains.schain</code></td><td>see <a href="/Dungeon-Hopper-Docs/docs/chains">chains</a></td></tr>
<tr><td><code>Decorators</code>, <code>decorate</code></td><td><code>@decorators.decorators</code>, <code>@decorators.decorate</code></td><td>see <a href="/Dungeon-Hopper-Docs/docs/decorators">decorators</a></td></tr>
<tr><td><code>Entity</code></td><td><code>@base.entity</code></td><td>the entity base class</td></tr>
<tr><td><code>copyChains</code></td><td><code>Entity.copyChains</code></td><td>see <a href="/Dungeon-Hopper-Docs/docs/decorators#copying-decorators">copyChains</a></td></tr>
<tr><td><code>Item</code></td><td><code>@items.item</code></td><td>the item base class. see <a href="/Dungeon-Hopper-Docs/docs/items">items</a></td></tr>
<tr><td><code>GameObject</code></td><td><code>@base.gameobject</code></td><td>the game object base class</td></tr>
<tr><td><code>Retouchers</code></td><td><code>@retouchers.all</code></td><td>all core retouchers. see <a href="/Dungeon-Hopper-Docs/docs/retouchers">retouchers</a></td></tr>
</tbody>
</table>
<table>
<thead>
<tr><th>Variable name</th><th>Decription</th></tr>
</thead>
<tbody>
<tr><td><code>Items</code></td><td>A mapping id -&gt; item. see <a href="/Dungeon-Hopper-Docs/docs/items">items</a></td></tr>
<tr><td><code>Entities</code></td><td>A mapping id -&gt; entity class.</td></tr>
</tbody>
</table>
<p>There are some others, which were omitted.</p>
<h3><a class="anchor" aria-hidden="true" id="mods"></a><a href="#mods" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Mods</h3>
<p>The content added by mods is also available globally by <code>Mods.MOD_NAME</code>. See <a href="/Dungeon-Hopper-Docs/docs/mods">mods</a>.</p>
<h2><a class="anchor" aria-hidden="true" id="how-is-stuff-rendered"></a><a href="#how-is-stuff-rendered" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>How is stuff rendered</h2>
<p>This bulk section is reserved for later, but just to give you an overall idea:</p>
<ul>
<li><p>By doing things in the world, entities push the so-called <code>changes</code> in the world's changes list. These indicate what they did during the beat. They also report the <code>event</code> that took place, as well as the immediate position, state and the orientation of the entity that caused the <code>change</code>. For example, <em>doing attack</em> would be considered a valid <code>event</code>, as well as <em>being pushed</em>, <em>being displaced</em>, <em>being attacked</em>, <em>taking damage</em> etc.</p></li>
<li><p>The <strong>view-model</strong> (currently, the <strong>renderer</strong>), figures out which animations to play on which object, how much time should the animation take etc. It would sync the animations to the beats in game. By the end of every beat, it would receive a list of all changes that happened during that beat and process that in some way so as to prepare all the necessary information for displaying what happened.</p></li>
<li><p>The <strong>view</strong> (currently, the <strong>graphics</strong>), serves an abstraction of the API provided by the render engine. Its functions, like setting the position of a sprite, creating a new sprite, selecting a particular time into the animation etc. are called by the <strong>view-model</strong>. They are the ones calling the render engine API, e.g <em>Corona</em> (currently used) or <em>LOVE 2d</em>.</p></li>
</ul>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/Dungeon-Hopper-Docs/docs/start"><span class="arrow-prev">← </span><span>What is this?</span></a><a class="docs-next button" href="/Dungeon-Hopper-Docs/docs/chains"><span>Chains and Chain Templates</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#globals">Globals</a><ul class="toc-headings"><li><a href="#mods">Mods</a></li></ul></li><li><a href="#how-is-stuff-rendered">How is stuff rendered</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/Dungeon-Hopper-Docs/" class="nav-home"><img src="/Dungeon-Hopper-Docs/img/favicon.ico" alt="Dungeon Hopper" width="66" height="58"/></a><div><h5>Docs</h5><a href="/Dungeon-Hopper-Docs/docs/en/start.html">Getting Started</a></div><div><h5>Community</h5><a href="/Dungeon-Hopper-Docs/en/users.html">User Showcase</a><a href="https://stackoverflow.com/questions/tagged/" target="_blank" rel="noreferrer noopener">Stack Overflow</a><a href="https://discordapp.com/">Project Chat</a><a href="https://twitter.com/" target="_blank" rel="noreferrer noopener">Twitter</a></div><div><h5>More</h5><a href="/Dungeon-Hopper-Docs/blog">Blog</a><a href="https://github.com/AntonC9018/Dungeon-Hopper">GitHub Repo</a><a class="github-button" href="https://github.com/AntonC9018/Dungeon-Hopper" data-icon="octicon-star" data-count-href="/facebook/docusaurus/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section><a href="https://opensource.facebook.com/" target="_blank" rel="noreferrer noopener" class="fbOpenSource"><img src="/Dungeon-Hopper-Docs/img/oss_logo.png" alt="Facebook Open Source" width="170" height="45"/></a><section class="copyright">Copyright © 2020 Your Name or Your Company Name</section></footer></div></body></html>